<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>swoole-cli demo</title>
</head>
<body>
    <input type="text" id="txt" />
    <button type="submit" onclick="send()">提交</button>
    <p id="response"></p>
    <script>
        // 自动使用当前页面的 IP
        var wsServer = 'ws://'+ window.location.hostname +':9502';
        var websocket = new WebSocket(wsServer);
        websocket.onopen = function (evt) {
            console.log("Connected to WebSocket server.");
        };

        websocket.onclose = function (evt) {
            console.log("Disconnected");
        };

        websocket.onmessage = function (evt) {
            console.log('Retrieved data from server: ' + evt.data);
            document.getElementById("response").innerHTML += evt.data+'<br/>';
        };

        websocket.onerror = function (evt, e) {
            console.log('Error occured: ' + evt.data);
        };

        function send() {
            websocket.send(document.getElementById("txt").value);
        }
    </script>
</body>

</html>